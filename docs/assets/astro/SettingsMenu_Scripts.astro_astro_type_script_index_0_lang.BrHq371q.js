/*!
 * @maddimathon/utility-astro@0.1.0-alpha.draft
 * @license MIT
 */class b{constructor(e,t,i=null,s=null){this.name=e,this.path=t,this.expireDays=i,this.defaultValue=s}delete(){this.set("",-1)}get(){const e=decodeURIComponent(document.cookie).split(";").map(i=>i.trim()),t=new RegExp(`^${this.name}=`,"g");for(const i of e)if(i.match(t)!==null)return i.replace(t,"");return this.defaultValue}set(e,t=this.expireDays){const i={[this.name]:e,expires:null,path:this.path};if(typeof t=="number"){const o=new Date;o.setTime(o.getTime()+t*24*60*60*1e3),i.expires=o.toUTCString()}const s=[];for(const o in i)i[o]!==null&&s.push(`${o}=${i[o]}`);document.cookie=s.join(";")}}/*!
 * @maddimathon/utility-astro@0.1.0-alpha.draft
 * @license MIT
 */class d{constructor(e,t){this.menu=e,this.#i=document.querySelector(t?.root||":root"),this.#n=e.querySelector(t?.resetButton||"[data-settings-reset]"),this.#a=e.getAttribute(t?.pathAttr||"data-settings-path")||"/",this.#e=e.querySelectorAll(t?.inputs||"input[data-settings-input]"),!(!this.#n||!this.#e)&&(this.resetButtonClicked=this.resetButtonClicked.bind(this),this.settingSelected=this.settingSelected.bind(this),this.update_allInputs=this.update_allInputs.bind(this),this._update_allInputs=this._update_allInputs.bind(this),this.update_allInputs(),this.#e.forEach(i=>{i.addEventListener("change",()=>this.settingSelected(i))}),this.#n.addEventListener("click",this.resetButtonClicked))}#s=[];#i;#t={};#r={};#e;#a;#n;#o=null;_setup_attr_key(e){let t=null;switch(e){case"brightness-mode":window.matchMedia("( prefers-color-scheme: light )").addEventListener("change",this.update_allInputs),["light","dark"].forEach(i=>{window.matchMedia(`( prefers-color-scheme: ${i} )`).matches&&(t=i)});break;case"contrast-mode":window.matchMedia("( prefers-contrast: more )").addEventListener("change",this.update_allInputs),t="average",window.matchMedia("( prefers-contrast: less )").matches?t="low":window.matchMedia("( prefers-contrast: more )").matches&&(t="high"),(window.matchMedia("( forced-colors: active )").matches||window.matchMedia("( prefers-contrast: custom )").matches)&&(t=null);break;case"motion":window.matchMedia("( prefers-reduced-motion: reduce )").addEventListener("change",this.update_allInputs),t="reduce",window.matchMedia("( prefers-reduced-motion: no-preference )").matches&&(t="no-preference");break;case"typeface":t="body";break}this.#r[e]=t,!(this.#s.includes(e)||this.#t[e])&&(this.#s.push(e),this.#t[e]=new b(e,this.#a,null,null))}resetButtonClicked(){this.#s.forEach(e=>{this.#i.removeAttribute(e),this.#t[e]?.delete()}),this.update_allInputs()}settingSelected(e){const t=e.getAttribute("name");if(!t)return;const i=e.getAttribute("value");i&&(this.#i.setAttribute(`data-${t}`,i),this.#t[t]?.set(i))}update_allInputs(){this.#e?.forEach(e=>{e.checked=!1}),this.#o&&clearTimeout(this.#o),this.#o=setTimeout(this._update_allInputs,100)}_update_allInputs(){for(const e of Array.from(this.#e??[])){const t=e.getAttribute("name");if(!t)continue;this._setup_attr_key(t);const i=e.getAttribute("value");if(!i)continue;const s=this.#t[t]?.get()??this.#r[t]??null;s&&(`${i}`==`${s}`?(e.checked=!0,this.#i.setAttribute(`data-${t}`,s)):e.checked=!1)}}}(c=>{async function e(t,i="auto",s){const o=async n=>{new c(n);const h=()=>n.scrollIntoView({behavior:i??"auto",block:"start",inline:"nearest"});n.addEventListener("toggle-open",h),n.addEventListener("toggle-close",h);const l=n.id;if(!l)return;const p={reset:s?.reset?typeof s.reset=="function"?s.reset(l):s.reset:"[data-settings-reset]",toggle:s?.toggle?typeof s.toggle=="function"?s.toggle(l):s.toggle:`button[data-toggle-control=${l}]`},r=document.querySelector(p.toggle);if(!r)return;const u=n.querySelector(p.reset);if(!u)return;const f=a=>{a?.relatedTarget&&!n.contains(a.relatedTarget)&&u.focus()},g=a=>{a?.relatedTarget&&!n.contains(a.relatedTarget)&&r.focus()};n.addEventListener("toggle-open",()=>{r.addEventListener("blur",f),u.addEventListener("blur",g)}),n.addEventListener("toggle-close",()=>{r.removeEventListener("blur",f),u.removeEventListener("blur",g),r.focus()})},m=typeof t.forEach=="function"?Array.from(t):[t];return Promise.all(m.map(o))}c.init=e})(d||(d={}));const w=document.querySelectorAll("[data-settings-menu]"),k=window.getComputedStyle(document.documentElement).scrollBehavior||void 0;d.init(w,k);
