---
/**
 * @since 0.1.0-alpha
 * 
 * @packageDocumentation
 */

/* import - types */
import type { GenericProps } from '../../ts/00-types/index.js';

/* import - functions */
import { absoluteInternalURL } from '../functions/index.js';

/* import - values */

/* import - components */

/* import - layouts */


/* TYPES ===================================== */

/**
 * Input props for the Page_Meta component.
 * 
 * @since 0.1.0-alpha
 * @since 0.1.0-alpha.17 â€” Moved to component file.
 */
export interface Page_MetaProps {

    /**
     * Page meta title.
     */
    title: string;

    /**
     * Whether to allow archiving of this page.
     */
    archive?: boolean;

    /**
     * Whether to allow bot indexing of this page.
     */
    bots?: boolean;

    /**
     * Canonical URL or relative path.
     */
    canonical?: string | URL;

    description?: string;

    keywords?: string[];

    themeColor?: string;
}


/* PROPS ===================================== */

export type Props = GenericProps<Page_MetaProps>;

const meta: Props = Astro.props.frontmatter ?? Astro.props;


/* CONSTANTS ===================================== */

const canonical = 
    typeof meta.canonical === 'object'
    ? meta.canonical
    : absoluteInternalURL(
        Astro.url,
        ( meta.canonical ?? Astro.url.pathname ),
        false
    );


---

<title set:text={meta.title} />

<meta name="robots"    content={`${meta.bots ? "index,follow" : "noindex,nofollow"},${meta.archive ? "archive" : "noarchive"}`} />
<meta name="googlebot" content={`${meta.bots ? "index,follow" : "noindex,nofollow"},${meta.archive ? "archive" : "noarchive"}`} />

<meta  property="og:title" content={meta.title} />
<meta name="twitter:title" content={meta.title} />

{ meta.description && (
<meta         name="description" content={meta.description} />
<meta  property="og:description" content={meta.description} />
<meta name="twitter:description" content={meta.description} />
) }

{ meta.keywords && <meta name="keywords" content={meta.keywords.join(',')} /> }

<link rel="canonical" href={canonical} />
<meta property="og:url" content={canonical} />

{ meta.themeColor && <meta name="themeColor" content={meta.themeColor} /> }