///
/// @package @maddimathon/utility-astro@0.1.0-alpha.draft
/// @since 0.1.0-alpha.draft
///

@use 'pkg:@maddimathon/utility-sass/list';
@use 'pkg:@maddimathon/utility-sass/map';

@use 'pkg:@maddimathon/utility-sass/templates/base/lib/01-functions' as utils;

@use '../../config';
// @use '../../tokens';

///
/// @return {list}
///
/// @since 0.1.0-alpha.draft
///
@function width-value($slug, $returnAsNumber: false) {
    $libValue: utils.width-value($slug, $returnAsNumber: $returnAsNumber);

    // returns
    @if $slug == 'page' and list.length($libValue) > 0 {
        $_rem: list.nth($libValue, 1);

        @return if(
            $returnAsNumber,
            $libValue,
            list.join(
                $libValue,
                (
                    calc(
                        var-width(content) + utils.var-gap-inline(layout) +
                            var-width(sidebar)
                    )
                ),
                $separator: comma
            )
        );
    }

    @return $libValue;
}

///
/// @since 0.1.0-alpha.draft
///
@function var-width($slug) {
    $fallback: width-value($slug);

    @if list.length($fallback) < 1 {
        @return var(--width-#{$slug});
    }

    @return var(--width-#{$slug}, #{list.nth($fallback, 1)});
}
