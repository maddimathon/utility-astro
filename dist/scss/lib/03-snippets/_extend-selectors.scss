///
/// @package @maddimathon/utility-astro@0.1.0-alpha.16
/// @since 0.1.0-alpha
///

@use 'pkg:@maddimathon/utility-sass/list';
@use 'pkg:@maddimathon/utility-sass/selector';

@use 'pkg:@maddimathon/utility-sass/03-snippets' as lib;

@use '../../config';

@use '../01-functions' as *;
// @use '../02-mixins' as *;

///
/// @since 0.1.0-alpha.16 — Added $additional_optional param for additional selectors that are always optional.
///
@mixin extend-selectors-globals(
    $additional: (),
    $additional_optional: (),
    $optional: null,
    $allHeadingLevels: token-all-heading-levels()
) {
    //
    $additional: list.append($additional, (nav));
    $additional: list.append(
        $additional,
        (
            (
                ':where(.js) [data-toggle-control][data-toggle-is-current-target]'
            ),
            focus-ring--where
        )
    );

    @include lib.extend-selectors-globals(
        $additional: $additional,
        $additional_optional: $additional_optional,
        $optional: $optional,
        $allHeadingLevels: $allHeadingLevels
    );
}

///
/// @since 0.1.0-alpha.16 — Added $additional_optional param for additional selectors that are always optional.
///
@mixin extend-selectors-utils(
    $additional: (),
    $additional_optional: (),
    $optional: null,
    $allHeadingLevels: token-all-heading-levels()
) {
    //
    // $additional: list.append($additional, ('.icon', 'icon'));

    $additional_optional: list.join(
        $additional_optional,
        to-extend-selector-content-layout(),
        $separator: comma
    );

    $additional_optional: list.append(
        $additional_optional,
        ('.skip-link-list', 'skip-link-list'),
        $separator: comma
    );

    $_baseLevelListSelector: (
        '.table-of-contents [data-toggle-content] > .container ol',
        '.table-of-contents > ol'
    );
    $_baseLevelListSelector_lvl2: selector.nest(
        $_baseLevelListSelector,
        'ol, ul'
    );

    $additional: list.join(
        $additional,
        (
            ($_baseLevelListSelector, 'ul'),
            ($_baseLevelListSelector_lvl2, 'ul-2'),
            (selector.nest($_baseLevelListSelector_lvl2, 'ol, ul'), 'ul-3')
        ),
        $separator: comma
    );

    @include lib.extend-selectors-utils(
        $additional: $additional,
        $additional_optional: $additional_optional,
        $optional: $optional,
        $allHeadingLevels: $allHeadingLevels
    );
}

@mixin extend-selectors(
    $optional: null,
    $additional_globals: (),
    $additional_globals_optional: (),
    $additional_utils: (),
    $additional_utils_optional: (),
    $allHeadingLevels: token-all-heading-levels()
) {
    @if config.$print_globals {
        @include extend-selectors-globals(
            $additional: $additional_globals,
            $additional_optional: $additional_globals_optional,
            $optional: $optional,
            $allHeadingLevels: $allHeadingLevels
        );
    }

    @if config.$print_utils {
        @include extend-selectors-utils(
            $additional: $additional_utils,
            $additional_optional: $additional_utils_optional,
            $optional: $optional,
            $allHeadingLevels: $allHeadingLevels
        );
    }
}
