---
/**
 * @since 0.1.0-alpha
 *
 * @packageDocumentation
 */

/* import - types */
import type { GenericElementProps } from '../../ts/00-types/index.js';

/* import - functions */

/* import - values */

/* import - components */
import { Prism } from '@astrojs/prism';

/* import - layouts */

/* TYPES ===================================== */

/* PROPS ===================================== */

/**
 * Input props for the CodeBlock component.
 * 
 * @since 0.1.0-alpha
 * @since 0.1.0-alpha.17 â€” Moved to component file.
 */
export interface CodeBlockProps {

    children?: any;

    /**
     * Code language, if any.
     */
    lang?: string;
}

export interface Props extends GenericElementProps<CodeBlockProps, 'div'> {}

const {
    children,
    lang,
    class: classList = [],
    ...attributes
}: Props = Astro.props.frontmatter ?? Astro.props;

/* CONSTANTS ===================================== */

const codeHTML: string =
    typeof children === 'string'
        ? children
        : (await Astro.slots.render('default')).trim() || '';
---

{
    codeHTML &&
        (lang ? (
            <Prism
                code={codeHTML}
                lang={lang}
                class:list={classList}
                {...attributes}
            />
        ) : (
            <!-- prettier-ignore -->
            <pre
                class:list={classList}
                {...attributes}
            ><code><Fragment set:text={codeHTML} /></code></pre>
        ))
}
