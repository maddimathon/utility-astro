---
/**
 * A component
 * @since 0.1.0-alpha
 *
 * @packageDocumentation
 */

/* import - types */
import type { GenericElementProps } from '../../ts/00-types/index.js';
import type { CodeBlockProps } from './CodeBlock.astro';

/* import - functions */
import { VariableInspector } from '@maddimathon/utility-typescript/classes';

/* import - values */

/* import - components */
import CodeBlock from './CodeBlock.astro';

/* import - layouts */

/* TYPES ===================================== */

/**
 * Input props for the VariableDump component.
 *
 * @since 0.1.0-alpha
 * @since 0.1.0-alpha.17 â€” Moved to component file.
 */
export interface VariableDumpProps extends Omit<
    CodeBlockProps,
    'children' | 'lang'
> {
    /**
     * The variable to dump.
     */
    var: unknown;

    /**
     * Optional name to prefix the output.
     */
    name?: string;
}

/* PROPS ===================================== */

export interface Props extends GenericElementProps<VariableDumpProps, 'div'> {}

const {
    var: variable,
    name,
    ...props
}: Props = Astro.props.frontmatter ?? Astro.props;

/* CONSTANTS ===================================== */

const stringified = VariableInspector.stringify(
    { [name ?? 'var']: variable },
    {
        includePrefix: !!name,
    },
).trim();
---

<CodeBlock
    {...props}
    lang={undefined}
    set:html={stringified}
/>
