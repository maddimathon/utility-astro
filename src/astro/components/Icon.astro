---
/**
 * @since 0.1.0-alpha
 *
 * @packageDocumentation
 */

/* import - types */
import type { HTMLAttributes } from 'astro/types';
import type { ClassList } from '../../ts/00-types/index.js';

/* import - functions */

/* import - values */
import { SVG, SVG_Label } from '../../ts/svg.js';

/* import - components */

/* import - layouts */

/* TYPES ===================================== */

type IconProps_Slug = {
    class?: ClassList;
    type: keyof typeof SVG;
    slug?: never;
    svg?: never;
    svgLabel?: never;
};

type IconProps_Svg = {
    class?: ClassList;
    type?: never;
    slug: string;
    svg: string;
    svgLabel: string;
};

/**
 * Input props for the Icon component.
 *
 * @since 0.1.0-alpha
 * @since 0.1.0-alpha.17 â€” Moved to component file.
 */
export type IconProps = IconProps_Slug | IconProps_Svg;

/* PROPS ===================================== */

// prettier-ignore
export type Props = IconProps & Partial<Omit<HTMLAttributes<'span'>, keyof IconProps | 'class' | 'class:list'>>;

const {
    slug,
    svg,
    svgLabel,
    type = 'star',
    class: classList = [],
    ...attributes
}: Props = Astro.props;

/* CONSTANTS ===================================== */

const label = `${svgLabel ?? SVG_Label[type]} icon`;
---

<span
    {...attributes}
    class:list={['icon', `icon--${slug ?? type}`, '||', classList]}
    aria-label={label}
    title={label}
>
    {svg ? <Fragment set:html={svg} /> : <Fragment set:html={SVG[type]} />}
</span>

<style lang='scss'>
    @forward '../css/icon.css';
</style>
