---
/**
 * @since ___PKG_VERSION___
 *
 * @packageDocumentation
 */

/* import - types */
import type { GenericElementProps } from '../../ts/00-types/index.js';
import type { Props as ToggleNavMenuProps } from './ToggleNavMenu.d.ts';

/* import - functions */
import { parseMenuItem } from './NavMenu.astro';

/* import - values */

/* import - components */
import MenuList from './MenuList.astro';
// import NavMenu from './NavMenu.astro';
// import Toggle from './Toggle.astro';

/* import - layouts */

/* TYPES ===================================== */

export type * from './ToggleNavMenu.d.ts';

/* PROPS ===================================== */

export type Props = GenericElementProps<ToggleNavMenuProps, 'div'>;

const {
    id: menuID,
    menu,
    class: classList = [],
    ...attributes
}: Props = Astro.props.frontmatter ?? Astro.props;

/* CONSTANTS ===================================== */

const parsedMenu = menu.map((_item) => parseMenuItem(Astro.url, _item));

const id = `${menuID}-toggle`;

const buttonID = `${id}-button`;
const contentID = `${id}-content`;
const titleID = `${id}-title`;
---

<nav
    {...attributes}
    id={id}
    data-toggle-container
    class:list={classList}
    role='navigation'
>
    <div
        id={titleID}
        class='toggle-title'
    >
        <button
            id={buttonID}
            class='toggle-control'
            aria-disabled='true'
            data-toggle-control={id}
            role='button'
        >
            <span class='icon | toggle-icon'>
                <svg
                    xmlns='http://www.w3.org/2000/svg'
                    width='24'
                    height='24'
                    viewBox='0 0 24 24'
                    fill='none'
                    stroke='currentColor'
                    stroke-width='2'
                    stroke-linecap='round'
                    stroke-linejoin='round'
                    class='icon-plus'
                    role='img'
                    aria-hidden='true'
                >
                    <path
                        id='a'
                        d='M5 12h14'
                    ></path>
                    <path
                        id='b'
                        d='M12 5v14'
                    ></path>
                </svg>
            </span>
            <span
                class='toggle-control-inner'
                set:text='Menu'
            />
        </button>
    </div>

    <section
        data-toggle-content={id}
        id={contentID}
        aria-labelledby={titleID}
    >
        <div class='container'><MenuList menu={parsedMenu} /></div>
    </section>
</nav>
