---
/**
 * @since ___PKG_VERSION___
 *
 * @packageDocumentation
 */

/* import - types */
import type { GenericElementProps } from '../../ts/00-types/index.js';
import type { Props as ToggleNavMenuProps } from './ToggleNavMenu.d.ts';

/* import - functions */
import { parseMenuItem } from './NavMenu.astro';

/* import - values */

/* import - components */
import MenuList from './MenuList.astro';
import Toggle_Control from '../support/Toggle_Control.astro';

/* import - layouts */

/* TYPES ===================================== */

export type * from './ToggleNavMenu.d.ts';

/* PROPS ===================================== */

export type Props = GenericElementProps<ToggleNavMenuProps, 'div'>;

const {
    id: menuID,
    menu,
    class: classList = [],
    ...attributes
}: Props = Astro.props.frontmatter ?? Astro.props;

/* CONSTANTS ===================================== */

const parsedMenu = menu.map((_item) => parseMenuItem(Astro.url, _item));

const id = `${menuID}-toggle`;

const buttonID = `${id}-button`;
const contentID = `${id}-content`;
const titleID = `${id}-title`;
---

<nav
    {...attributes}
    id={id}
    data-toggle-container
    class:list={classList}
    role='navigation'
>
    <div
        id={titleID}
        class='toggle-title'
    >
        <Toggle_Control
            {...{ id, buttonHTML: 'Menu', buttonID }}
            data-toggle-primary-control={id}
        />
    </div>

    <section
        aria-labelledby={titleID}
        data-toggle-content={id}
        id={contentID}
    >
        <div class='container'><MenuList menu={parsedMenu} /></div>
    </section>
</nav>
